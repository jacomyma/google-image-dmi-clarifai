javascript: (function(t){var o={eval:'"var ui,app,queue,settings={};settings.apiKey=\\"%%APIKEY%%\\",settings.routes=\\"%%ROUTES%%\\",settings.routes=JSON.parse(settings.routes),console.log(\\"...Selected models:\\",settings.routes);try{(ui=new artoo.ui).$().append(\'<style>.container{position:fixed;top:0;left:0;padding:0:margin:0;width:100%;height:100%;background:rgba(255,255,255,0.9);} .inner{position:absolute;left:50%;top:50%;transform:translate(-50%,-50%);}</style><div class=\\"container\\"><div class=\\"inner\\"><strong>PLEASE WAIT...</strong></div></div>\')}catch(t){console.warn(\\"Note: minor Artoo UI issue\\",t)}function newQueue(t,o){var e={};return t.forEach((function(t,o){e[t[\\"thumbnail url\\"]]=t})),{urls:o||[],tableIndex:e,nextBatch:function(){if(0==this.urls.length){console.log(\\"Download CSV\\"),artoo.saveCsv(Object.values(this.tableIndex));try{ui.kill()}catch(t){console.warn(\\"Note: minor Artoo UI issue\\",t)}alert(\\"Clarifai queries successful\\")}else{for(var t=100,o=[];t-- >0&&this.urls.length>0;)o.push(this.urls.pop());try{runClarifaiBatch(o)}catch(t){notifyError(t,\\"Error while running Clarifai batch :(\\")}}},updateRow:function(t,o){var e;for(e in o)this.tableIndex[t][e]=o[e]}}}function runClarifaiBatch(t,o){if(void 0===o&&(o=0),o>=settings.routes.length)queue.nextBatch();else{var e=settings.routes[o];console.log(\'Querying Clarifai \\"\'+e.name+\'\\" API to enrich data...\');app.models.predict(e.api,t).then((function(n){console.log(\\"...Clarifai responded...\\"),n.outputs&&0!=n.outputs.length?(console.log(\\"   (response has \\"+n.outputs.length+\\" outputs)...\\"),e.types.forEach((function(o){parseResponse(n,o,e.name,t)})),runClarifaiBatch(t,o+1)):notifyError(void 0,\\"Clarifai response has no outputs\\")})).catch((function(t){notifyError(t,\\"ARG, Something went wrong with the \\"+e.name+\\" api call\\")}))}}function parseResponse(t,o,e,n){console.log(\\"...\\"+e+\\": Parse response as \\"+o.id+\\"...\\"),n.forEach((function(n,a){var s={};if(t.outputs[a]&&t.outputs[a].data){var i=t.outputs[a].data;switch(o.id){case\\"json-in-a-column\\":s[e+\\"-json\\"]=JSON.stringify(i);break;case\\"list-in-a-column\\":var r={},l=function(t){t.filter((function(t){return t.value>=o.threshold})).forEach((function(t){r[t.name]=!0}))};i&&i.concepts&&l(i.concepts),i&&i.regions&&i.regions.forEach((function(t){t.data&&t.data.concepts&&l(t.data.concepts)})),s[e+\\"-concepts\\"]=Object.keys(r).join(\\", \\");break;case\\"count-in-multiple-columns\\":r={},l=function(t){t.filter((function(t){return t.value>=o.threshold})).forEach((function(t){r[t.name]=(r[t.name]||0)+1}))};for(c in i&&i.concepts&&l(i.concepts),i&&i.regions&&i.regions.forEach((function(t){t.data&&t.data.concepts&&l(t.data.concepts)})),r)s[c]=r[c]}}else;queue.updateRow(n,s)}))}function notifyError(t,o){try{ui.kill()}catch(t){console.warn(\\"Note: minor Artoo UI issue\\",t)}console.log(o),t&&(console.error(t),t.data&&(console.log(\\"Error status code: \\"+t.data.status.code),console.log(\\"Error description: \\"+t.data.status.description),t.data.status.details&&console.log(\\"Error details: \\"+t.data.status.details))),alert(o+\\" (see JS console for more details)\\")}artoo.scrapeTable(\\"table\\",{headers:\\"th\\",done:function(t){console.log(\\"Loading Clarifai API...\\"),artoo.injectScript(\\"https://sdk.clarifai.com/js/clarifai-latest.js\\",(function(){app=new Clarifai.App({apiKey:settings.apiKey}),console.log(\\"...API loaded\\"),(queue=newQueue(t,t.map((function(t){return t[\\"thumbnail url\\"]})))).nextBatch()}))}});"'},e=!0;if("object"==typeof this.artoo&&(artoo.settings.reload||(artoo.log.verbose("artoo already exists within this page. No need to inject him again."),artoo.loadSettings(o),artoo.exec(),e=!1)),e){var n=document.getElementsByTagName("body")[0];n||(n=document.createElement("body"),document.firstChild.appendChild(n));var a=document.createElement("script");console.log("artoo.js is loading..."),a.src="//medialab.github.io/artoo/public/dist/artoo-latest.min.js",a.type="text/javascript",a.id="artoo_injected_script",a.setAttribute("settings",JSON.stringify(o)),n.appendChild(a)}}).call(this);