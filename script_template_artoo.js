javascript: (function(t){var e={eval:'"var settings={apiKey:\\"%%APIKEY%%\\",routes:\\"%%ROUTES%%\\"};console.log(\\"Routes before Unstringify:\\",settings.routes),settings.routes=JSON.parse(settings.routes),console.log(\\"Routes after Unstringify:\\",settings.routes);var app,queue,ui=new artoo.ui;function newQueue(t,e){var o={};return t.forEach((function(t,e){o[t[\\"thumbnail url\\"]]=t})),{urls:e||[],tableIndex:o,nextBatch:function(){if(0==this.urls.length)console.log(\\"Download CSV\\"),artoo.saveCsv(Object.values(this.tableIndex)),ui.kill(),alert(\\"Clarifai queries successful\\");else{for(var t=100,e=[];t-- >0&&this.urls.length>0;)e.push(this.urls.pop());try{runClarifaiBatch(e)}catch(t){notifyError(t,\\"Error while running Clarifai batch :(\\")}}},updateRow:function(t,e){var o;for(o in e)this.tableIndex[t][o]=e[o]}}}function runClarifaiBatch(t,e){if(void 0===e&&(e=0),e>=settings.routes.length)queue.nextBatch();else{var o=settings.routes[e];console.log(\'Querying Clarifai \\"\'+o.name+\'\\" API to enrich data...\');app.models.predict(o.api,t).then((function(n){console.log(\\"...Clarifai responded...\\"),n.outputs&&0!=n.outputs.length?(console.log(\\"   (response has \\"+n.outputs.length+\\" outputs)...\\"),o.types.forEach((function(e){parseResponse(n,e,o.name,t)})),runClarifaiBatch(t,e+1)):notifyError(void 0,\\"Clarifai response has no outputs\\")})).catch((function(t){notifyError(t,\\"ARG, Something went wrong with the \\"+o.name+\\" api call\\")}))}}function parseResponse(t,e,o,n){console.log(\\"...\\"+o+\\": Parse response as \\"+e.id+\\"...\\"),n.forEach((function(n,a){var s={};if(t.outputs[a]&&t.outputs[a].data){var i=t.outputs[a].data;switch(e.id){case\\"json-in-a-column\\":s[o+\\"-json\\"]=JSON.stringify(i);break;case\\"list-in-a-column\\":var r={},u=function(t){t.filter((function(t){return t.value>=e.threshold})).forEach((function(t){r[t.name]=!0}))};i&&i.concepts&&u(i.concepts),i&&i.regions&&i.regions.forEach((function(t){t.data&&t.data.concepts&&u(t.data.concepts)})),s[o+\\"-concepts\\"]=Object.keys(r).join(\\", \\");break;case\\"count-in-multiple-columns\\":r={},u=function(t){t.filter((function(t){return t.value>=e.threshold})).forEach((function(t){r[t.name]=(r[t.name]||0)+1}))};for(c in i&&i.concepts&&u(i.concepts),i&&i.regions&&i.regions.forEach((function(t){t.data&&t.data.concepts&&u(t.data.concepts)})),r)s[c]=r[c]}}else;queue.updateRow(n,s)}))}function notifyError(t,e){ui.kill(),console.log(e),t&&(console.error(t),t.data&&(console.log(\\"Error status code: \\"+t.data.status.code),console.log(\\"Error description: \\"+t.data.status.description),t.data.status.details&&console.log(\\"Error details: \\"+t.data.status.details))),alert(e+\\" (see JS console for more details)\\")}ui.$().append(\'<style>.container{position:fixed;top:0;left:0;padding:0:margin:0;width:100%;height:100%;background:rgba(255,255,255,0.9);} .inner{position:absolute;left:50%;top:50%;transform:translate(-50%,-50%);}</style><div class=\\"container\\"><div class=\\"inner\\"><strong>PLEASE WAIT...</strong></div></div>\'),artoo.scrapeTable(\\"table\\",{headers:\\"th\\",done:function(t){console.log(\\"Loading Clarifai API...\\"),artoo.injectScript(\\"https://sdk.clarifai.com/js/clarifai-latest.js\\",(function(){app=new Clarifai.App({apiKey:settings.apiKey}),console.log(\\"...API loaded\\"),(queue=newQueue(t,t.map((function(t){return t[\\"thumbnail url\\"]})))).nextBatch()}))}});"'},o=!0;if("object"==typeof this.artoo&&(artoo.settings.reload||(artoo.log.verbose("artoo already exists within this page. No need to inject him again."),artoo.loadSettings(e),artoo.exec(),o=!1)),o){var n=document.getElementsByTagName("body")[0];n||(n=document.createElement("body"),document.firstChild.appendChild(n));var a=document.createElement("script");console.log("artoo.js is loading..."),a.src="//medialab.github.io/artoo/public/dist/artoo-latest.min.js",a.type="text/javascript",a.id="artoo_injected_script",a.setAttribute("settings",JSON.stringify(e)),n.appendChild(a)}}).call(this);